version: '2'
services: 
  web:
    image: hitalos/laravel:latest
    ports:
      - 8700:80
    volumes:
      # Sichere Volume-Mounts - nur spezifische Verzeichnisse mounten
      - ./app:/var/www/app
      - ./config:/var/www/config
      - ./database:/var/www/database
      - ./public:/var/www/public
      - ./resources:/var/www/resources
      - ./routes:/var/www/routes
      - ./storage:/var/www/storage
      - ./bootstrap:/var/www/bootstrap
      - ./composer.json:/var/www/composer.json
      - ./composer.lock:/var/www/composer.lock
      - ./artisan:/var/www/artisan
      - ./.env:/var/www/.env:ro
    command: php -S 0.0.0.0:80 -t public  
    links:
      - db:db
  db:
    image: fedora/postgresql:latest
    volumes:
      - ./db:/var/lib/pgsql/data/pgdata
    environment:
      - POSTGRES_DATABASE=ausbildungsnachweis
      - POSTGRES_USER=ausbildungsnachweis
      - POSTGRES_PASSWORD=ausbildungsnachweis
      - POSTGRESQL_CONTAINER_OPTS=assert_external_data = false ; clear_pgdata_pidfile = true

     
